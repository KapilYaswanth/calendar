(this.webpackJsonpcalendar=this.webpackJsonpcalendar||[]).push([[0],{68:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(10),c=n.n(i),s=n(15),o=n(35),l=(n(68),n(130)),d=n(116),u=n(122),j=n(126),b=n(125),h=n(119),g=n(123),O=n(124),p=n(121),v=n(3);function m(e){console.log("props",e);var t=Object(a.useState)(null),n=Object(s.a)(t,2),r=n[0],i=n[1],c=Object(a.useState)(null),o=Object(s.a)(c,2),l=o[0],d=o[1],u=Object(a.useState)(null),j=Object(s.a)(u,2),b=j[0],h=j[1];return Object(v.jsx)("div",{children:Object(v.jsxs)("form",{"data-testid":"update form",onSubmit:function(t){t.preventDefault(),function(){var t=window.gapi;t.load("client:auth2",(function(){console.log("loaded client"),t.client.init({apiKey:"AIzaSyBChZ90Wv3zs6WMlkgW75EZbobmbsO8ePs",clientId:"639100172651-75tnqt7k8b64d75n8en3ghosh8jnh9d9.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/calendar.events"});var n={summary:r||e.name,start:{date:l||e.start,timeZone:"Asia/Kolkata"},end:{date:b||e.end,timeZone:"Asia/Kolkata"}};t.client.calendar.events.update({calendarId:"primary",eventId:e.id,resource:n}).execute((function(e){e.hasOwnProperty("error")?(console.log("error",e),window.alert("Error occured")):(console.log("-updated-",e),window.alert("updated event"))}))}))}(),i(""),d(""),h("")},children:[Object(v.jsx)("input",{type:"text","data-testid":"Update event name",value:r,id:"outlined-basic",placeholder:"Event name",onChange:function(e){return i(e.target.value)}}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("label",{children:"Start date"}),"\xa0\xa0",Object(v.jsx)("input",{type:"date","data-testid":"Update start date",value:l,id:"outlined-basic",placeholder:"Start date",variant:"outlined",onChange:function(e){return d(e.target.value)}}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("label",{children:"End date"}),"\xa0\xa0\xa0",Object(v.jsx)("input",{type:"date","data-testid":"Update end date",value:b,id:"outlined-basic",placeholder:"End date",variant:"outlined",onChange:function(e){return h(e.target.value)}}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{children:Object(v.jsx)("button",{type:"submit",children:"Update Event"})})]})})}var x=n(23),f=n(131),y=n(127),w=Object(d.a)({table:{minWidth:650}});var S=Object(x.b)((function(e){return{isSignedIn:e.auth.isSignedIn,Email:e.auth.payload}}))((function(e){var t=w(),n=Object(a.useState)([]),r=Object(s.a)(n,2),i=r[0],c=r[1],d=Object(a.useState)(!1),x=Object(s.a)(d,2),S=x[0],I=x[1],k=Object(a.useState)(!1),E=Object(s.a)(k,2),C=E[0],N=E[1];if(C)throw new Error("Login error");return Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{className:"page",children:[Object(v.jsx)(o.b,{to:"/insert",children:Object(v.jsx)("button",{className:"button",children:"Add Event"})}),"\xa0\xa0",Object(v.jsx)("button",{className:"button",onClick:function(){return function(){var t=window.gapi,n=["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"];I(!0),t.load("client:auth2",(function(){console.log("loaded client"),t.client.init({apiKey:"AIzaSyBChZ90Wv3zs6WMlkgW75EZbobmbsO8ePs",clientId:"639100172651-75tnqt7k8b64d75n8en3ghosh8jnh9d9.apps.googleusercontent.com",discoveryDocs:n,scope:"https://www.googleapis.com/auth/calendar.events"}),e.isSignedIn?(t.client.load("calendar","v3",(function(){return console.log("loaded!")})),t.client.calendar.events.list({calendarId:"primary",showDeleted:!1,singleEvents:!0,maxResults:100,orderBy:"startTime"}).then((function(e){var t=e.result.items;console.log("EVENTS: ",t),console.log("res: ",e),c(t)}))):N(!0)})),I(!1)}()},children:"Get Events"})]}),Object(v.jsxs)("div",{className:"ui relaxed divided list",children:[e.isSignedIn&&(console.log(e.Email),Object(v.jsx)(h.a,{component:p.a,children:Object(v.jsxs)(u.a,{className:t.table,"aria-label":"simple table",children:[Object(v.jsx)(g.a,{className:t.head,children:Object(v.jsxs)(O.a,{className:"tablehead",children:[Object(v.jsx)(b.a,{children:"Event Name"}),Object(v.jsx)(b.a,{children:"Organizer Email"}),Object(v.jsx)(b.a,{children:"Event Date"}),Object(v.jsx)(b.a,{children:"Attend"}),Object(v.jsx)(b.a,{children:"View Event"}),Object(v.jsx)(b.a,{children:"Update"})]})}),Object(v.jsx)(j.a,{children:i.reverse().map((function(t){return"Monthly Meet Up and Birthday Bash"!==t.summary&&Object(v.jsxs)(O.a,{children:[Object(v.jsx)(b.a,{component:"th",scope:"row",children:t.summary}),Object(v.jsx)(b.a,{children:t.creator.email}),Object(v.jsx)(b.a,{children:t.start.date||t.start.dateTime.slice(0,10)}),Object(v.jsx)(b.a,{children:Object(v.jsx)("a",{target:"_blank",rel:"noreferrer",href:t.hangoutLink,children:t.hangoutLink||"Meet link not available"})}),Object(v.jsx)(b.a,{children:Object(v.jsx)("a",{target:"_blank",rel:"noreferrer",href:t.htmlLink,children:"View"})}),Object(v.jsx)(b.a,{children:t.creator.email===e.Email?Object(v.jsx)(m,{id:t.id,name:t.summary,start:t.start.date,end:t.end.date}):"Cannot update"})]},t.id)}))})]})})),!e.isSignedIn&&Object(v.jsx)(l.a,{variant:"outlined",severity:"error",children:"Please login to view your calendar events"}),Object(v.jsx)(f.a,{open:S,children:Object(v.jsx)(y.a,{color:"inherit"})})]})]})})),I=(n(75),n(44)),k=n(45),E=n(47),C=n(46),N=function(e){Object(E.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(I.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).onAuthChange=function(t){t?e.props.signIn(e.auth.currentUser.get().getBasicProfile().getEmail()):e.props.signOut()},e.onSignInClick=function(){e.auth.signIn()},e.onSignOutClick=function(){e.auth.signOut()},e.getAuthState=function(){return e.props.isSignedIn?Object(v.jsxs)("div",{style:{cursor:"pointer"},onClick:function(){return e.onSignOutClick()},children:[Object(v.jsx)("img",{className:"ui avatar image",src:e.auth.currentUser.get().getBasicProfile().getImageUrl(),alt:""}),"\xa0\xa0Sign Out"]}):Object(v.jsxs)("div",{style:{cursor:"pointer"},onClick:function(){return e.onSignInClick()},children:[Object(v.jsx)("img",{className:"ui avatar image",src:"https://images.theconversation.com/files/93616/original/image-20150902-6700-t2axrz.jpg?ixlib=rb-1.1.0&q=45&auto=format&w=1000&fit=clip",alt:""}),"\xa0\xa0Sign In"]})},e}return Object(k.a)(n,[{key:"componentDidMount",value:function(){var e=this;window.gapi.load("client:auth2",(function(){window.gapi.client.init({apiKey:"AIzaSyBChZ90Wv3zs6WMlkgW75EZbobmbsO8ePs",clientId:"639100172651-75tnqt7k8b64d75n8en3ghosh8jnh9d9.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/calendar https://www.googleapis.com/auth/calendar.events https://www.googleapis.com/auth/calendar.events.readonly https://www.googleapis.com/auth/calendar.readonly"}).then((function(){e.auth=window.gapi.auth2.getAuthInstance(),e.onAuthChange(e.auth.isSignedIn.get()),e.auth.isSignedIn.listen(e.onAuthChange)}))}))}},{key:"render",value:function(){return Object(v.jsx)("div",{className:"item",children:this.getAuthState()})}}]),n}(a.Component),A=Object(x.b)((function(e){return console.log("map",e),{isSignedIn:e.auth.isSignedIn}}),{signIn:function(e){return{type:"SIGN_IN",payload:e}},signOut:function(){return{type:"SIGN_OUT"}}})(N);var W=function(){return Object(v.jsx)("div",{className:"ui secondary pointing menu",children:Object(v.jsx)("div",{className:"right menu",children:Object(v.jsx)(A,{})})})},z=n(129),Z=n(13),P=n(128),U=Object(d.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),width:"25ch"}}}}));var B=Object(x.b)((function(e){return{isSignedIn:e.auth.isSignedIn}}))((function(e){var t=U(),n=Object(a.useState)(!1),r=Object(s.a)(n,2),i=r[0],c=r[1],o=Object(a.useState)(!1),d=Object(s.a)(o,2),u=d[0],j=d[1],b=Object(a.useState)(""),h=Object(s.a)(b,2),g=h[0],O=h[1],p=Object(a.useState)(""),m=Object(s.a)(p,2),x=m[0],f=m[1],y=Object(a.useState)(""),w=Object(s.a)(y,2),S=w[0],I=w[1],k=Object(Z.e)();return Object(v.jsxs)("div",{children:[e.isSignedIn&&Object(v.jsxs)("form",{"data-testid":"insert form",onSubmit:function(t){t.preventDefault(),function(){console.log("data",x);var t=window.gapi;t.load("client:auth2",(function(){if(console.log("loaded client"),t.client.init({apiKey:"AIzaSyBChZ90Wv3zs6WMlkgW75EZbobmbsO8ePs",clientId:"639100172651-75tnqt7k8b64d75n8en3ghosh8jnh9d9.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/calendar.events"}),e.isSignedIn){var n={summary:g,start:{date:x,timeZone:"Asia/Kolkata"},end:{date:S,timeZone:"Asia/Kolkata"}};t.client.calendar.events.insert({calendarId:"primary",resource:n}).execute((function(e){e&&e.hasOwnProperty("error")?(console.log("-error-",e),j(!0)):(console.log("-added-",e),c(!0))}))}}))}(),O(""),f(""),I("")},className:t.root,children:[Object(v.jsx)(z.a,{"data-testid":"Input event name",value:g,id:"outlined-basic",placeholder:"Event Name",label:"Event Name",variant:"outlined",onChange:function(e){return O(e.target.value)},required:!0}),Object(v.jsx)("br",{}),Object(v.jsx)(z.a,{id:"outlined-basic",variant:"outlined",label:"Start date",type:"date",placeholder:"Input Start Date",value:x,InputLabelProps:{shrink:!0},onChange:function(e){return f(e.target.value)},required:!0}),Object(v.jsx)("br",{}),Object(v.jsx)(z.a,{id:"outlined-basic",variant:"outlined",label:"End date",type:"date",placeholder:"Input End Date",value:S,InputLabelProps:{shrink:!0},onChange:function(e){return I(e.target.value)},required:!0}),Object(v.jsx)("div",{children:Object(v.jsx)(P.a,{variant:"contained",size:"large",color:"primary",type:"submit",className:"button",children:"Add Event"})})]}),"\xa0\xa0\xa0\xa0\xa0\xa0",Object(v.jsx)(P.a,{variant:"contained",size:"large",color:"primary",onClick:function(){k.push("/calendar")},children:"Go back"}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),!e.isSignedIn&&Object(v.jsx)(l.a,{variant:"filled",severity:"error",children:"Sorry! make sure that you are logged in for adding events"}),i&&Object(v.jsx)(l.a,{onClose:function(){c(!1)},children:"Added event successfully"}),u&&Object(v.jsx)(l.a,{onClose:function(){j(!1)},severity:"error",children:"Sorry some error occured please try after some time"})]})})),D=function(e){Object(E.a)(n,e);var t=Object(C.a)(n);function n(e){var a;return Object(I.a)(this,n),(a=t.call(this,e)).state={error:null,errorInfo:null},a}return Object(k.a)(n,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t})}},{key:"render",value:function(){return this.state.errorInfo?Object(v.jsx)("div",{children:Object(v.jsx)("h2",{children:"Something went wrong,please refresh and login to continue.."})}):this.props.children}}]),n}(r.a.Component);var q=function(){return Object(v.jsxs)("div",{className:"ui container",children:[Object(v.jsx)(W,{}),Object(v.jsxs)(o.a,{children:[Object(v.jsx)(Z.a,{path:"/calendar",exact:!0,children:Object(v.jsx)(D,{children:Object(v.jsx)(S,{})})}),Object(v.jsx)(Z.a,{path:"/insert",children:Object(v.jsx)(B,{})})]})]})},K=n(39),M=n(51),G={isSignedIn:null,payload:null},L=Object(M.b)(Object(M.a)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_IN":return Object(K.a)(Object(K.a)({},e),{},{isSignedIn:!0,payload:t.payload});case"SIGN_OUT":return Object(K.a)(Object(K.a)({},e),{},{isSignedIn:!1,payload:t.payload});default:return e}}}));c.a.render(Object(v.jsx)(x.a,{store:L,children:Object(v.jsx)(q,{})}),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.f2ab45b2.chunk.js.map